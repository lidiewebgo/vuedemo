{"remainingRequest":"/Users/isaac-chip/Desktop/vue-admin-template/node_modules/babel-loader/lib/index.js!/Users/isaac-chip/Desktop/vue-admin-template/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/isaac-chip/Desktop/vue-admin-template/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/isaac-chip/Desktop/vue-admin-template/src/components/Tags/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/isaac-chip/Desktop/vue-admin-template/src/components/Tags/index.vue","mtime":1598882164928},{"path":"/Users/isaac-chip/Desktop/vue-admin-template/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/isaac-chip/Desktop/vue-admin-template/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/isaac-chip/Desktop/vue-admin-template/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/isaac-chip/Desktop/vue-admin-template/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLmNvbnN0cnVjdG9yIjsKaW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL1VzZXJzL2lzYWFjLWNoaXAvRGVza3RvcC92dWUtYWRtaW4tdGVtcGxhdGUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgeyBtYXBTdGF0ZSB9IGZyb20gInZ1ZXgiOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGNvbnRleHRNZW51VmlzaWJsZTogZmFsc2UsCiAgICAgIC8vIOaYr+WQpuaYvuekuuiPnOWNlQogICAgICBtZW51TGVmdDogIiIsCiAgICAgIC8vIOWPs+mUruiPnOWNlei3neemu+a1j+iniOWZqOW3pui+ueeahOi3neemuwogICAgICBtZW51VG9wOiAiIiwKICAgICAgLy8g5Y+z6ZSu6I+c5Y2V6Led56a75rWP6KeI5Zmo5LiK6L6555qE6Led56a7CiAgICAgIHRhZ0luZGV4OiAwLAogICAgICAvLyDlvZPliY3ngrnlh7vnmoR0YWfnmoTntKLlvJUKICAgICAgdGFnOiB7fSwKICAgICAgLy8g5b2T5YmN5Y+z6ZSu54K55Ye755qEdGFn5a+56LGhCiAgICAgIGFycm93VmlzaWJsZTogZmFsc2UsCiAgICAgIC8vIOaYr+WQpuaYvuekuueureWktAogICAgICB0YWdzQm94V2lkdGg6IDAsCiAgICAgIC8vIHJlZiDkuLogb3V0Qm94IOeahOmVv+W6pgogICAgICB0YWdzV2lkdGg6IDAsCiAgICAgIC8vIHJlZiDkuLogdGFncyDnmoTplb/luqYKICAgICAgbGVmdDogMCAvLyByZWYg5Li6IGJveCDoioLngrnnm7jlr7nkuo7lt6bovrnnmoTot53nprvvvIznlKjkuo7nrq3lpLTngrnlh7sKCiAgICB9OwogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgZnVuY3Rpb24gKGUpIHsKICAgICAgdmFyIHRhcmdldCA9IGUudGFyZ2V0OwoKICAgICAgaWYgKHRhcmdldC5ub2RlTmFtZSAhPT0gIlNQQU4iKSB7CiAgICAgICAgLy8g5Y+q6KaB54K55Ye755qE5LiN5pivZWwtdGFn5bCx5Y+v5Lul5YWz6Zet77yM5Zug5Li6ZWwtdGFn5piv55Soc3Bhbuagh+etvuWunueOsOeahAogICAgICAgIF90aGlzLmNvbnRleHRNZW51VmlzaWJsZSA9IGZhbHNlOwogICAgICB9CiAgICB9KTsKICB9LAogIGNvbXB1dGVkOiBfb2JqZWN0U3ByZWFkKHt9LCBtYXBTdGF0ZSh7CiAgICB0YWdzOiBmdW5jdGlvbiB0YWdzKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS50YWdzLnRhZ0xpc3Q7CiAgICB9CiAgfSkpLAogIG1ldGhvZHM6IHsKICAgIGhhbmRsZUNsaWNrQ29udGV4dE1lbnU6IGZ1bmN0aW9uIGhhbmRsZUNsaWNrQ29udGV4dE1lbnUoZXZlbnQpIHsKICAgICAgdmFyIGUgPSBldmVudCB8fCB3aW5kb3cuZXZlbnQ7CiAgICAgIHZhciB0YXJnZXQgPSBlLnRhcmdldDsKICAgICAgdGhpcy5tZW51TGVmdCA9IGUubGF5ZXJYICsgMjAgKyAicHgiOyAvLyDoj5zljZXlh7rnjrDnmoTkvY3nva7ot53nprvlt6bkvqfnmoTot53nprsKCiAgICAgIHRoaXMubWVudVRvcCA9IGUubGF5ZXJZICsgMjAgKyAicHgiOyAvLyDoj5zljZXlh7rnjrDnmoTkvY3nva7ot53nprvpobbpg6jnmoTot53nprsKCiAgICAgIHRoaXMudGFnSW5kZXggPSBOdW1iZXIodGFyZ2V0LmdldEF0dHJpYnV0ZSgiZGF0YS1pbmRleCIpKTsgLy8g6I635Y+W5b2T5YmN5Y+z5Ye76I+c5Y2V55qE57Si5byV44CC5LuOMOW8gOWniwoKICAgICAgdGhpcy5jb250ZXh0TWVudVZpc2libGUgPSB0cnVlOyAvLyDmmL7npLroj5zljZUKCiAgICAgIHRoaXMudGFnID0gdGhpcy50YWdzW3RoaXMudGFnSW5kZXhdOyAvLyDlvZPliY3lj7Plh7vnmoToj5zljZXkv6Hmga8KICAgIH0KICB9Cn07"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6CA,SAAA,QAAA,QAAA,MAAA;AACA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,kBAAA,EAAA,KADA;AACA;AACA,MAAA,QAAA,EAAA,EAFA;AAEA;AACA,MAAA,OAAA,EAAA,EAHA;AAGA;AACA,MAAA,QAAA,EAAA,CAJA;AAIA;AACA,MAAA,GAAA,EAAA,EALA;AAKA;AACA,MAAA,YAAA,EAAA,KANA;AAMA;AACA,MAAA,YAAA,EAAA,CAPA;AAOA;AACA,MAAA,SAAA,EAAA,CARA;AAQA;AACA,MAAA,IAAA,EAAA,CATA,CASA;;AATA,KAAA;AAWA,GAbA;AAcA,EAAA,OAdA,qBAcA;AAAA;;AACA,IAAA,MAAA,CAAA,gBAAA,CAAA,OAAA,EAAA,UAAA,CAAA,EAAA;AACA,UAAA,MAAA,GAAA,CAAA,CAAA,MAAA;;AACA,UAAA,MAAA,CAAA,QAAA,KAAA,MAAA,EAAA;AACA;AACA,QAAA,KAAA,CAAA,kBAAA,GAAA,KAAA;AACA;AACA,KANA;AAOA,GAtBA;AAuBA,EAAA,QAAA,oBACA,QAAA,CAAA;AACA,IAAA,IAAA,EAAA,cAAA,KAAA;AAAA,aAAA,KAAA,CAAA,IAAA,CAAA,OAAA;AAAA;AADA,GAAA,CADA,CAvBA;AA6BA,EAAA,OAAA,EAAA;AACA,IAAA,sBADA,kCACA,KADA,EACA;AACA,UAAA,CAAA,GAAA,KAAA,IAAA,MAAA,CAAA,KAAA;AACA,UAAA,MAAA,GAAA,CAAA,CAAA,MAAA;AACA,WAAA,QAAA,GAAA,CAAA,CAAA,MAAA,GAAA,EAAA,GAAA,IAAA,CAHA,CAGA;;AACA,WAAA,OAAA,GAAA,CAAA,CAAA,MAAA,GAAA,EAAA,GAAA,IAAA,CAJA,CAIA;;AACA,WAAA,QAAA,GAAA,MAAA,CAAA,MAAA,CAAA,YAAA,CAAA,YAAA,CAAA,CAAA,CALA,CAKA;;AACA,WAAA,kBAAA,GAAA,IAAA,CANA,CAMA;;AAEA,WAAA,GAAA,GAAA,KAAA,IAAA,CAAA,KAAA,QAAA,CAAA,CARA,CAQA;AACA;AAVA;AA7BA,CAAA","sourcesContent":["<template>\n  <div\n    class=\"tags\"\n    @contextmenu.prevent\n    ref=\"tags\"\n    :style=\"{'padding': arrowVisible ? '12px 0' : '12px 10px'}\"\n  >\n    <div class=\"tags-out-box\" ref=\"outBox\">\n      <div class=\"svg arrow\" v-if=\"arrowVisible\" @click=\"handleClickToLeft\">\n        <svg-icon icon-class=\"arrow-left\" />\n      </div>\n      <div\n        class=\"tags-box\"\n        ref=\"box\"\n        :style=\"{'padding-left': arrowVisible ? '30px' : '0', left: `${left}px`}\"\n      >\n        <el-tag\n          ref=\"tag\"\n          size=\"small\"\n          v-for=\"(tag, i) in tags\"\n          :data-index=\"i\"\n          :data-id=\"tag.menuId\"\n          :key=\"tag.name\"\n          :closable=\"tag.name !== 'home'\"\n          :effect=\"$route.name === tag.name ? 'dark' : 'plain'\"\n          @contextmenu.native.prevent=\"handleClickContextMenu($event)\"\n          @click=\"handleTagClick($event, tag)\"\n          @close=\"handleTagClose(tag, i)\"\n        >{{tag.label}}</el-tag>\n      </div>\n      <div class=\"svg arrow arrow-right\" v-if=\"arrowVisible\" @click=\"handleClickToRight\">\n        <svg-icon icon-class=\"arrow-right\" />\n      </div>\n    </div>\n\n    <ul class=\"right-menu\" :style=\"{left: menuLeft, top: menuTop}\" v-show=\"contextMenuVisible\">\n      <a href=\"javascript:;\" @click=\"refresh\">刷新</a>\n      <a href=\"javascript:;\" @click=\"closeTag\" v-if=\"tagIndex !== 0\">关闭</a>\n      <a href=\"javascript:;\" @click=\"closeOtherTag\" v-if=\"tagIndex !== 0\">关闭其它</a>\n      <a href=\"javascript:;\" @click=\"closeAllTag\">关闭所有</a>\n    </ul>\n  </div>\n</template>\n\n<script>\nimport { mapState } from \"vuex\";\nexport default {\n  data() {\n    return {\n      contextMenuVisible: false, // 是否显示菜单\n      menuLeft: \"\", // 右键菜单距离浏览器左边的距离\n      menuTop: \"\", // 右键菜单距离浏览器上边的距离\n      tagIndex: 0, // 当前点击的tag的索引\n      tag: {}, // 当前右键点击的tag对象\n      arrowVisible: false, // 是否显示箭头\n      tagsBoxWidth: 0, // ref 为 outBox 的长度\n      tagsWidth: 0, // ref 为 tags 的长度\n      left: 0, // ref 为 box 节点相对于左边的距离，用于箭头点击\n    };\n  },\n  mounted() {\n    window.addEventListener(\"click\", (e) => {\n      const target = e.target;\n      if (target.nodeName !== \"SPAN\") {\n        // 只要点击的不是el-tag就可以关闭，因为el-tag是用span标签实现的\n        this.contextMenuVisible = false;\n      }\n    });\n  },\n  computed: {\n    ...mapState({\n      tags: (state) => state.tags.tagList,\n    }),\n  },\n\n  methods: {\n    handleClickContextMenu(event) {\n      const e = event || window.event;\n      const target = e.target;\n      this.menuLeft = e.layerX + 20 + \"px\"; // 菜单出现的位置距离左侧的距离\n      this.menuTop = e.layerY + 20 + \"px\"; // 菜单出现的位置距离顶部的距离\n      this.tagIndex = Number(target.getAttribute(\"data-index\")); // 获取当前右击菜单的索引。从0开始\n      this.contextMenuVisible = true; // 显示菜单\n\n      this.tag = this.tags[this.tagIndex]; // 当前右击的菜单信息\n    },\n    \n  },\n  \n};\n</script>\n\n<style lang=\"scss\" scoped>\n// tag组件样式\n.tags {\n  width: 100%;\n  white-space: nowrap;\n  background-color: blue;\n  padding: 12px 10px;\n  &-out-box {\n    display: inline-block;\n    position: relative;\n  }\n  &-box {\n    position: relative;\n    transition: 0.3s;\n  }\n}\n</style>"],"sourceRoot":"src/components/Tags"}]}